(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{3434:function(e,r,t){"use strict";t(7294);var n=t(948),i=t(9861),a=t(5893),o=(0,n.ZP)(i.Z)((function(e){return{marginTop:"2rem",color:e.theme.palette.text.dark}}));r.Z=function(e){var r=e.autoFocus,t=e.fullwidth,n=e.name,i=e.required,l=e.placeholder,s=e.variant,c=e.label,u=e.value,d=e.onChange,f=e.error,m=e.size,p=e.helperText,h=e.type,x=e.multiline,v=e.maxRows,g=e.inputStyle;return(0,a.jsx)(o,{inputProps:{style:g},onChange:d,value:u,error:f,helperText:p,label:c,autoFocus:r,fullWidth:t,name:n,required:i,placeholder:l,variant:s,type:h,size:m,multiline:x,maxRows:v})}},8163:function(e,r,t){"use strict";var n=t(9499),i=t(7294),a=t(6447),o=t(6798),l=t(1737),s=t(5893);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var u=i.forwardRef((function(e,r){return(0,s.jsx)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({elevation:6,ref:r,variant:"filled"},e))}));r.Z=function(e){var r=e.severity,t=e.message,n=e.openSnack,i=e.close;return(0,s.jsx)(a.Z,{spacing:2,sx:{width:"100%"},children:(0,s.jsx)(o.Z,{open:n,autoHideDuration:6e3,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,s.jsx)(u,{onClose:i,severity:r,sx:{width:"100%"},children:t})})})}},7846:function(e,r,t){"use strict";t(7294);var n=t(5861),i=t(5893);r.Z=function(e){var r=e.children,t=e.variant,a=e.component;return(0,i.jsx)(n.Z,{variant:t,component:a,sx:{fontWeight:"600"},children:r})}},615:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return z}});var n=t(29),i=t(9499),a=t(7794),o=t.n(a),l=t(7294),s=t(5113),c=t(3156),u=t(6886),d=t(2963),f=t(122),m=t(7357),p=t(9661),h=t(3321),x=t(5496),v=t(4231),g=t(1812),j=t(3946),Z=t(1170),y=t(948),w=t(7846),b=t(3434),k=t(7536),P=t(9669),_=t.n(P),S=t(1841),C=t(433),N=t(8163),O=t(5893),A=(0,y.ZP)(s.Z)((function(e){var r=e.theme;return(0,i.Z)({border:r.border.style.solid,borderRadius:r.border.radius},r.breakpoints.down("md"),{paddingLeft:"0",textAlign:"center"})})),T=(0,y.ZP)("input")({display:"none"}),E={fontSize:"1rem"},L=v.Ry({firstName:v.Z_().max(15,"Pr\xe9nom devrait avoir moins de 15 charact\xe8res").matches(/^[a-zA-Z]*$/,"Pr\xe9nom ne devrait pas contenir des chiffres"),lastName:v.Z_().max(15,"Nom devrait avoir moins de 15 charact\xe8res").matches(/^[a-zA-Z]*$/,"Nom ne devrait pas contenir des chiffres"),bio:v.Z_().min(200,"D\xe9crivez-vous en au moins 200 caract\xe8res"),portfolioLink:v.Z_().url("Url invalide (https://example.com)"),linkedinProfil:v.Z_().url("Url invalide (https://example.com)").matches(/^(https?:\/\/)?((w{3}\.)?)linkedin.com\/in\/.*/i,"Profil Linkedin invalide")}),z=!0;r.default=function(e){var r=e.profile,t=(0,l.useState)(r.photo_link),i=t[0],a=t[1],s=(0,l.useState)({firstName:r.firstname,lastName:r.lastname,avatarUrl:r.photo_link,bio:r.profil?r.profil.bio:"",linkPortfolio:r.profil?r.profil.link_portfolio:"",linkLinkedin:r.profil?r.profil.link_linkedin:" "}),v=s[0],y=s[1],P=(0,l.useState)(!1),z=P[0],D=P[1],I=(0,k.cI)({resolver:(0,x.X)(L)}),R=I.handleSubmit,U=I.reset,q=I.control,F=(0,l.useState)(!1),Q=F[0],V=F[1],X=(0,l.useState)(!1),W=X[0],$=X[1],B=(0,l.useState)({message:"",severity:""}),G=B[0],H=B[1],M=(0,l.useState)(!1),J=M[0],K=M[1],Y=(0,l.useContext)(S._);(0,l.useEffect)((function(){y({firstName:r.firstname,lastName:r.lastname,avatarUrl:r.photo_link,bio:r.profil.bio,linkPortfolio:r.profil.link_portfolio,linkLinkedin:r.profil.link_linkedin})}),[v]);var ee=function(){var e=(0,n.Z)(o().mark((function e(r){var t,n,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),D(!0),t=r.target.files[0],e.next=5,_().post("/api/s3/uploadFile",{name:t.name,type:t.type});case 5:return n=e.sent,i=n.data,l=i.url,e.next=10,_().put(l,t,{headers:{"Content-type":t.type,"Access-Control-Allow-Origin":"*"}}).then((function(){K(!0),H({message:"Avatar charg\xe9",severity:"success"}),a(C.T+t.name)})).catch((function(e){return console.log(console.log(e))})).finally((function(){D(!1),$(!1)}));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(N.Z,{close:function(e,r){"clickaway"!==r&&K(!1)},openSnack:J,severity:G.severity,message:G.message}),(0,O.jsxs)(u.ZP,{item:!0,md:12,sx:{marginTop:"2rem"},children:[(0,O.jsxs)(d.Z,{"aria-label":"breadcrumb",children:[(0,O.jsx)(f.Z,{underline:"hover",color:"inherit",href:"/students/".concat(r.username),children:"Profil"}),(0,O.jsx)(f.Z,{underline:"hover",color:"text.primary",children:"Editer"})]}),(0,O.jsx)(m.Z,{children:(0,O.jsx)(u.ZP,{item:!0,md:12,sx:{margin:"2rem 0"},id:"modal-modal-description",children:(0,O.jsx)(A,{elevation:0,children:(0,O.jsxs)(c.Z,{sx:{width:"100% !important",padding:"2rem"},children:[(0,O.jsx)(w.Z,{id:"modal-modal-title",children:"Informations personnelles"}),(0,O.jsxs)(u.ZP,{container:!0,sx:{padding:"2rem 0"},children:[(0,O.jsx)(u.ZP,{item:!0,md:3,sx:{width:"100% !important"},children:(0,O.jsxs)(u.ZP,{children:[(0,O.jsx)(p.Z,{src:i,sx:{position:"relative",width:"10rem",height:"10rem",margin:"auto"}}),(0,O.jsx)(m.Z,{sx:{textAlign:"center"},children:(0,O.jsxs)("label",{htmlFor:"profilImage",children:[(0,O.jsx)(T,{accept:"image/png, image/jpeg",id:"profilImage",type:"file",name:"profilImage",onChange:function(){var e=(0,n.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}),z?(0,O.jsx)(g.Z,{loading:!0,sx:{color:"red !important"}}):(0,O.jsx)(j.Z,{color:"primary","aria-label":"upload picture",component:"span",children:(0,O.jsx)(Z.Z,{})})]})})]})}),(0,O.jsx)(u.ZP,{item:!0,md:9,sx:{width:"100% !important"},children:(0,O.jsx)(u.ZP,{children:(0,O.jsxs)(m.Z,{autoComplete:"off",children:[(0,O.jsxs)(u.ZP,{sx:{display:"flex",justifyContent:"space-between","@media screen and (max-width: 1023px)":{display:"flex",flexDirection:"column"}},children:[(0,O.jsx)(u.ZP,{sx:{width:"45%","@media screen and (max-width: 1023px)":{width:"100%"}},children:(0,O.jsx)(k.Qr,{sx:{marginRight:"1rem"},name:"firstName",control:q,defaultValue:v.firstName,render:function(e){var r=e.field,t=r.onChange,n=r.value,i=e.fieldState.error;return(0,O.jsx)(b.Z,{type:"text",variant:"outlined",label:"Pr\xe9nom",fullwidth:!0,inputStyle:E,autoFocus:!0,onChange:t,value:n,error:!!i,helperText:i?i.message:null})},rules:{required:!1}})}),(0,O.jsx)(u.ZP,{sx:{width:"45%","@media screen and (max-width: 1023px)":{width:"100%"}},children:(0,O.jsx)(k.Qr,{name:"lastName",control:q,defaultValue:v.lastName,render:function(e){var r=e.field,t=r.onChange,n=r.value,i=e.fieldState.error;return(0,O.jsx)(b.Z,{type:"text",variant:"outlined",label:"Nom",inputStyle:E,fullwidth:!0,onChange:t,value:n,error:!!i,helperText:i?i.message:null})},rules:{required:!1}})})]}),(0,O.jsxs)(u.ZP,{sx:{display:"flex",justifyContent:"space-between","@media screen and (max-width: 1023px)":{display:"flex",flexDirection:"column"}},children:[(0,O.jsx)(u.ZP,{sx:{width:"45%","@media screen and (max-width: 1023px)":{width:"100%"}},children:(0,O.jsx)(k.Qr,{sx:{marginRight:"1rem"},name:"linkedinProfil",control:q,defaultValue:v.linkLinkedin,render:function(e){var r=e.field,t=r.onChange,n=r.value,i=e.fieldState.error;return(0,O.jsx)(b.Z,{type:"text",variant:"outlined",label:"Linkedin",inputStyle:E,fullwidth:!0,autoFocus:!0,onChange:t,value:n,error:!!i,helperText:i?i.message:null})},rules:{required:!1}})}),(0,O.jsx)(u.ZP,{sx:{width:"45%","@media screen and (max-width: 1023px)":{width:"100%"}},children:(0,O.jsx)(k.Qr,{name:"portfolioLink",control:q,defaultValue:v.linkPortfolio,render:function(e){var r=e.field,t=r.onChange,n=r.value,i=e.fieldState.error;return(0,O.jsx)(b.Z,{type:"text",variant:"outlined",label:"Porfolio",fullwidth:!0,inputStyle:E,onChange:t,value:n,error:!!i,helperText:i?i.message:null})},rules:{required:!1}})})]}),(0,O.jsx)(u.ZP,{children:(0,O.jsx)(k.Qr,{name:"bio",control:q,defaultValue:v.bio,render:function(e){var r=e.field,t=r.onChange,n=r.value,i=e.fieldState.error;return(0,O.jsx)(b.Z,{id:"bio",type:"text",label:"A propos de Moi",variant:"outlined",fullwidth:!0,inputStyle:E,onChange:t,multiline:!0,maxRows:400,value:n,error:!!i,helperText:i?i.message:null})},rules:{required:!1}})})]})})})]}),(0,O.jsx)("form",{onSubmit:R((function(e){V(!0);var r=Y.getUserAuthState().tokenAuth,t=Y.getUserAuthState().userAuth;_().put("".concat("https://cms-mentor4job-strapi.herokuapp.com/","students/editprofil/"),{data:e,profilImage:i,userId:t.id,profilId:t.profil.id},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(){Y.setUser(),K(!0),H({message:"Profil modifi\xe9",severity:"success"})})).catch((function(e){console.log(e),K(!0),H({message:"Profil modifi\xe9",severity:"error"})})).finally((function(){return V(!1)}))})),children:(0,O.jsxs)(u.ZP,{sx:{textAlign:"right"},children:[(0,O.jsx)(h.Z,{xs:12,disabled:W,type:"submit",variant:"contained",elevation:0,children:Q?"Enregistrement...":"Enregistrer"}),(0,O.jsx)(h.Z,{onClick:function(){U({firstName:r.firstname,lastName:r.lastname,avatarUrl:r.photo_link,bio:r.profil.bio,linkPortfolio:r.profil.link_portfolio,linkLinkedin:r.profil.link_linkedin}),a(r.photo_link)},variant:"outlined",sx:{marginLeft:".5rem"},elevation:0,children:"Annuler"})]})})]})})})})]})]})}},433:function(e,r,t){"use strict";t.d(r,{T:function(){return n}});var n="https://".concat("kda-certificats",".s3.").concat("eu-west-3",".amazonaws.com/")},4688:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/editprofil/[username]",function(){return t(615)}])}},function(e){e.O(0,[40,981,212,774,888,179],(function(){return r=4688,e(e.s=r);var r}));var r=e.O();_N_E=r}]);